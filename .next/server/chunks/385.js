exports.id=385,exports.ids=[385],exports.modules={2768:()=>{},3464:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>h});var e=c(8732);c(2015);var f=c(6393),g=a([f]);f=(g.then?(await g)():g)[0];let h=()=>{let{updateUserRole:a}=(0,f.A)(),b=b=>{a(b)};return(0,e.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,e.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-8",children:[(0,e.jsxs)("div",{className:"text-center mb-8",children:[(0,e.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Таны үүрэг сонгох"}),(0,e.jsx)("p",{className:"text-gray-600",children:"Та freelancer үү эсвэл үйлчлүүлэгч үү?"})]}),(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsx)("button",{onClick:()=>b("freelancer"),className:"w-full p-6 border-2 border-gray-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-colors group",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDCBC"}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Freelancer"}),(0,e.jsx)("p",{className:"text-gray-600 text-sm",children:"Би үйлчилгээ үзүүлэгч байна. Өөрийн ур чадвараа зарж, ажил хийнэ."})]})}),(0,e.jsx)("button",{onClick:()=>b("client"),className:"w-full p-6 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors group",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDC64"}),(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Үйлчлүүлэгч"}),(0,e.jsx)("p",{className:"text-gray-600 text-sm",children:"Би үйлчилгээ хайж байна. Freelancer-үүдээс ажил захиална."})]})})]}),(0,e.jsx)("div",{className:"mt-6 text-center",children:(0,e.jsx)("p",{className:"text-xs text-gray-500",children:"Та үүрэгээ хүссэн үедээ профайл хэсгээс өөрчлөх боломжтой."})})]})})};d()}catch(a){d(a)}})},4385:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>m});var e=c(8732);c(2768);var f=c(608),g=c(6393),h=c(8722),i=c(6258),j=c(3464),k=a([g,h,j]);function l({Component:a,pageProps:b,router:c}){let{user:d,userRole:f,isLoading:h}=(0,g.A)();return d&&null===f&&!h?(0,e.jsx)(j.A,{}):(0,e.jsx)(a,{...b})}function m(a){return(0,e.jsx)(f.ClerkProvider,{publishableKey:"pk_test_ZGVlcC1hbmNob3Z5LTczLmNsZXJrLmFjY291bnRzLmRldiQ",children:(0,e.jsx)(g.O,{children:(0,e.jsx)(h.p,{children:(0,e.jsx)(i.D,{children:(0,e.jsx)(l,{...a})})})})})}[g,h,j]=k.then?(await k)():k,d()}catch(a){d(a)}})},4540:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{N:()=>g});var e=c(3721),f=a([e]);e=(f.then?(await f)():f)[0];let g=(0,e.createClient)("https://yjhicggdvlrrpsuoital.supabase.co","sb_publishable_gQ4VxKOY-FGzv76gojqXDw_FEdA1OJR");d()}catch(a){d(a)}})},6258:(a,b,c)=>{"use strict";c.d(b,{D:()=>g});var d=c(8732),e=c(2015);let f=(0,e.createContext)(void 0),g=({children:a})=>{let[b,c]=(0,e.useState)([]),[g,h]=(0,e.useState)([]);return(0,d.jsx)(f.Provider,{value:{gigs:b,setGigs:c,messages:g,setMessages:h},children:a})}},6393:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{A:()=>m,O:()=>l});var e=c(8732),f=c(2015),g=c(608),h=c(4540),i=a([h]);h=(i.then?(await i)():i)[0];let j={theme:"light",language:"mn",notifications:{email:!0,push:!0,sms:!1},currency:"MNT"},k=(0,f.createContext)(void 0),l=({children:a})=>{let{user:b,isLoaded:c}=(0,g.useUser)(),{signOut:d,user:i}=(0,g.useClerk)(),[l,m]=(0,f.useState)(null),[n,o]=(0,f.useState)(j),[p,q]=(0,f.useState)(!0),[r,s]=(0,f.useState)(null);(0,f.useEffect)(()=>{b?(async()=>{try{let a=localStorage.getItem(`userRole_${b.id}`),c=localStorage.getItem(`userPreferences_${b.id}`);a?m(a):m(null),c&&o({...j,...JSON.parse(c)});try{await h.N.from("users").upsert({id:b.id,name:b.username||b.fullName||"Unknown User",email:b.emailAddresses[0]?.emailAddress||"",avatar:b.imageUrl||"/default-avatar.jpg"}),console.log("User upserted to Supabase")}catch(a){console.error("Error upserting user to Supabase:",a)}}catch(a){console.error("Error loading user data:",a),s("Failed to load user data")}finally{q(!1)}})():q(!1)},[b]);let t=async()=>{try{s(null),await d(),m(null),o(j),localStorage.removeItem(`userRole_${b?.id}`),localStorage.removeItem(`userPreferences_${b?.id}`)}catch(a){console.error("Error during logout:",a),s("Failed to logout")}},u=async a=>{try{m(a),b&&localStorage.setItem(`userRole_${b.id}`,a)}catch(a){console.error("Error updating user role:",a),s("Failed to update user role")}},v=async a=>{try{let c={...n,...a};o(c),b&&localStorage.setItem(`userPreferences_${b.id}`,JSON.stringify(c))}catch(a){console.error("Error updating user preferences:",a),s("Failed to update preferences")}},w=async()=>{try{console.log("User data refreshed")}catch(a){console.error("Error refreshing user:",a),s("Failed to refresh user data")}},x=b?.emailAddresses?.[0]?.verification?.status==="verified";return!c||p?(0,e.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,e.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})}):(0,e.jsx)(k.Provider,{value:{user:b,userRole:l,userPreferences:n,isEmailVerified:x,isLoading:p,error:r,login:a=>{console.log("User logged in:",a)},logout:t,updateUserRole:u,updateUserPreferences:v,refreshUser:w,clearError:()=>{s(null)}},children:a})},m=()=>{let a=(0,f.useContext)(k);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a};d()}catch(a){d(a)}})},8722:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{E:()=>l,p:()=>k});var e=c(8732),f=c(2015),g=c(6393),h=c(9493),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=(0,f.createContext)(void 0),k=({children:a})=>{let{user:b}=(0,g.A)(),[c,d]=(0,f.useState)([]),[i,k]=(0,f.useState)(!1),[l,m]=(0,f.useState)(null),[n,o]=(0,f.useState)(!1),p=c.filter(a=>!a.read).length;(0,f.useEffect)(()=>{b?q():d([])},[b]);let q=async()=>{if(b)try{k(!0),m(null);let a=await (0,h.Tr)(b.id);d(a)}catch(a){console.error("Error loading notifications:",a),m("Failed to load notifications")}finally{k(!1)}},r=async a=>{try{let c={userId:b?.id,type:a.type,title:a.title,message:a.message,actionUrl:a.actionUrl},e=await (0,h.UI)(c),f={id:e.id,type:e.type,title:e.title,message:e.message,read:!1,createdAt:e.created_at,actionUrl:e.action_url};d(a=>[f,...a])}catch(a){console.error("Error adding notification:",a)}},s=async a=>{try{await (0,h.bA)(a),d(b=>b.map(b=>b.id===a?{...b,read:!0}:b))}catch(a){console.error("Error marking notification as read:",a),m("Failed to mark notification as read")}},t=async()=>{try{let a=c.filter(a=>!a.read).map(a=>a.id);await Promise.all(a.map(a=>(0,h.bA)(a))),d(a=>a.map(a=>({...a,read:!0})))}catch(a){console.error("Error marking all notifications as read:",a),m("Failed to mark all notifications as read")}},u=async a=>{try{d(b=>b.filter(b=>b.id!==a))}catch(a){console.error("Error deleting notification:",a),m("Failed to delete notification")}};return(0,e.jsx)(j.Provider,{value:{notifications:c,unreadCount:p,isLoading:i,error:l,showNotifications:n,addNotification:r,markAsRead:s,markAllAsRead:t,deleteNotification:u,toggleNotifications:()=>{o(a=>!a)},clearError:()=>{m(null)}},children:a})},l=()=>{let a=(0,f.useContext)(j);if(void 0===a)throw Error("useNotifications must be used within a NotificationProvider");return a};d()}catch(a){d(a)}})},9493:(a,b,c)=>{"use strict";c.a(a,async(a,d)=>{try{c.d(b,{Dw:()=>u,Gs:()=>o,LF:()=>g,R_:()=>y,Tr:()=>s,UI:()=>r,VL:()=>j,WF:()=>n,_z:()=>k,bA:()=>t,bW:()=>v,bx:()=>q,iS:()=>m,kd:()=>h,kl:()=>i,mL:()=>x,si:()=>w,x5:()=>l,zu:()=>p});var e=c(4540),f=a([e]);e=(f.then?(await f)():f)[0];let g=async()=>{let{data:a,error:b}=await e.N.from("gigs").select(`
      *,
      user:users!user_id(name, avatar)
    `).order("id",{ascending:!1});if(b)throw b;return a.map(a=>({...a,userName:a.user?.name||"Unknown",userAvatar:a.user?.avatar||"/default-avatar.jpg",userId:a.user_id}))},h=async a=>{let{data:b,error:c}=await e.N.from("gigs").select("*").eq("id",a).single();if(c)throw c;return{...b,userName:"Unknown",userAvatar:"/default-avatar.jpg",userId:b.user_id}},i=async a=>{let{data:b,error:c}=await e.N.from("users").select("*").eq("id",a).single();return c?{id:a,name:"Unknown User",email:"unknown@example.com",avatar:"/default-avatar.jpg",bio:"User profile not available",skills:[]}:b},j=async a=>{let{data:b,error:c}=await e.N.from("messages").select(`
      *,
      sender:users!sender_id(name, avatar),
      receiver:users!receiver_id(name, avatar)
    `).or(`sender_id.eq.${a},receiver_id.eq.${a}`).order("timestamp",{ascending:!0});if(c)throw c;return b.map(a=>({id:a.id,senderId:a.sender_id,receiverId:a.receiver_id,content:a.content,timestamp:a.timestamp,status:a.status||"sent",file:a.file,sender:a.sender,receiver:a.receiver}))},k=async a=>{let b={id:a.id,sender_id:a.senderId,receiver_id:a.receiverId,content:a.content,timestamp:a.timestamp,...a.file&&{file:a.file}},{data:c,error:d}=await e.N.from("messages").insert(b).select().single();if(d)throw d;return{id:c.id,senderId:c.sender_id,receiverId:c.receiver_id,content:c.content,timestamp:c.timestamp,status:c.status||"sent",file:c.file}},l=async a=>{let{data:b,error:c}=await e.N.from("users").select("*").ilike("name",`%${a}%`).limit(20);if(c)throw c;return b},m=async a=>{let{error:b}=await e.N.from("messages").update({status:"read"}).in("id",a);if(b)throw b},n=async a=>[{id:"1",gig_id:"1",buyer_id:a,seller_id:"user1",amount:5e4,status:"completed",created_at:"2024-01-15T10:00:00Z",gigs:{title:"Logo Design",price:5e4,user_id:"user1"},users:{name:"John Doe",avatar:"/avatars/john-doe.jpg"}},{id:"2",gig_id:"2",buyer_id:a,seller_id:"user2",amount:75e3,status:"in_progress",created_at:"2024-01-18T14:30:00Z",gigs:{title:"Web Development",price:75e3,user_id:"user2"},users:{name:"Jane Smith",avatar:"/avatars/jane-smith.jpg"}}],o=async a=>{let{data:b,error:c}=await e.N.from("reviews").select(`
      *,
      user:users(name, avatar)
    `).eq("gig_id",a).order("date",{ascending:!1});if(c)throw c;return b.map(a=>({...a,userName:a.user?.name||"Unknown",userAvatar:a.user?.avatar||"/default-avatar.jpg"}))},p=async(a=10)=>{let{data:b,error:c}=await e.N.from("reviews").select(`
      *,
      user:users(name, avatar),
      gig:gigs(title)
    `).order("date",{ascending:!1}).limit(a);if(c)throw c;return b.map(a=>({...a,userName:a.user?.name||"Unknown",userAvatar:a.user?.avatar||"/default-avatar.jpg",gigTitle:a.gig?.title||"Unknown Gig"}))},q=async a=>{let b={id:Date.now().toString(),gig_id:a.gig_id,user_id:a.user_id,rating:a.rating,comment:a.comment,date:new Date().toISOString().split("T")[0]},{data:c,error:d}=await e.N.from("reviews").insert(b).select().single();if(d)throw d;return c},r=async a=>{let{data:b,error:c}=await e.N.from("notifications").insert({user_id:a.userId,type:a.type,title:a.title,message:a.message,action_url:a.actionUrl}).select().single();if(c)throw c;return b},s=async a=>{let{data:b,error:c}=await e.N.from("notifications").select("*").eq("user_id",a).order("date",{ascending:!1});if(c)throw c;return b},t=async a=>{let{data:b,error:c}=await e.N.from("notifications").update({read:!0}).eq("id",a).select().single();if(c)throw c;return b},u=async(a,b={})=>{let c=e.N.from("gigs").select(`
      *,
      user:users!user_id(name, avatar)
    `);if(a&&(c=c.or(`title.ilike.%${a}%,description.ilike.%${a}%,category.ilike.%${a}%`)),b.category&&(c=c.eq("category",b.category)),b.minPrice&&(c=c.gte("price",b.minPrice)),b.maxPrice&&(c=c.lte("price",b.maxPrice)),b.minRating&&(c=c.gte("rating",b.minRating)),b.sortBy)switch(b.sortBy){case"price_low":c=c.order("price",{ascending:!0});break;case"price_high":c=c.order("price",{ascending:!1});break;case"rating":c=c.order("rating",{ascending:!1});break;default:c=c.order("created_at",{ascending:!1})}else c=c.order("id",{ascending:!1});let{data:d,error:f}=await c;if(f)throw f;return d.map(a=>({...a,userName:a.user?.name||"Unknown",userAvatar:a.user?.avatar||"/default-avatar.jpg",userId:a.user_id}))},v=async()=>{let{data:a,error:b}=await e.N.from("gigs").select("category");if(b)throw b;let c={};return a.forEach(a=>{c[a.category]=(c[a.category]||0)+1}),Object.entries(c).map(([a,b])=>({name:a,count:b}))},w=async a=>{let{title:b,description:c,price:d,category:f,images:g,tags:h,packages:i,userId:j,userName:k,userAvatar:l}=a,{data:m}=await e.N.from("users").select("*").eq("id",j).single();m||await e.N.from("users").insert({id:j,name:k,email:"",avatar:l});let n={id:Date.now().toString(),user_id:j,title:b,description:c,price:d,category:f,images:g||[],tags:h||[],packages:i||[],rating:0,reviews:0},{data:o,error:p}=await e.N.from("gigs").insert(n).select().single();if(p)throw p;return o},x=()=>[{id:"in-demand",name:"In Demand",icon:"\uD83D\uDD25"},{id:"high-pay",name:"High Pay",icon:"\uD83D\uDCB0"},{id:"part-time",name:"Part-Time",icon:"⏰"},{id:"freelance",name:"Freelance",icon:"\uD83D\uDCBC"},{id:"remote",name:"Remote",icon:"\uD83C\uDFE0"},{id:"new-jobs",name:"New Jobs",icon:"\uD83C\uDD95"}],y=async()=>(await g()).slice(0,6).map(a=>({id:a.id,title:a.title,description:a.description,budget:a.price,jobType:a.category,company:a.userName,location:"Remote",postedDate:"2 days ago"}));d()}catch(a){d(a)}})}};