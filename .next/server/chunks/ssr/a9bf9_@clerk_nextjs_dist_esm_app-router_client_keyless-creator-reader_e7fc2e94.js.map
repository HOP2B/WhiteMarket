{"version":3,"sources":["../../../../node_modules/%40clerk/nextjs/src/app-router/client/keyless-creator-reader.tsx"],"sourcesContent":["import { useSelectedLayoutSegments } from 'next/navigation';\nimport React, { useEffect } from 'react';\n\nimport type { NextClerkProviderProps } from '../../types';\nimport { createOrReadKeylessAction } from '../keyless-actions';\n\nexport const KeylessCreatorOrReader = (props: NextClerkProviderProps) => {\n  const { children } = props;\n  const segments = useSelectedLayoutSegments();\n  const isNotFoundRoute = segments[0]?.startsWith('/_not-found') || false;\n  const [state, fetchKeys] = React.useActionState(createOrReadKeylessAction, null);\n  useEffect(() => {\n    if (isNotFoundRoute) {\n      return;\n    }\n    React.startTransition(() => {\n      fetchKeys();\n    });\n  }, [isNotFoundRoute]);\n\n  if (!React.isValidElement(children)) {\n    return children;\n  }\n\n  return React.cloneElement(children, {\n    key: state?.publishableKey,\n    publishableKey: state?.publishableKey,\n    __internal_keyless_claimKeylessApplicationUrl: state?.claimUrl,\n    __internal_keyless_copyInstanceKeysUrl: state?.apiKeysUrl,\n    __internal_bypassMissingPublishableKey: true,\n  } as any);\n};\n"],"names":[],"mappings":"uCAAA,IAAA,EAA0C,EAAA,CAAA,AAAjC,CAAiC,OAC1C,EAAiC,CAA1B,CAA0B,CAAA,CAAA,MAAjB,CAGhB,EAA0C,EAAA,CAAjC,AAAiC,CAAA,MAJA,CAMnC,GAL0B,CAKpB,EAAyB,AAAC,IANvC,IAAA,EAMyE,AACvE,GAAM,MAHkC,IAGhC,CAAA,CAAS,CAAI,EAEf,EAAA,CAAA,AAAkB,MAAA,GAAA,AADlB,CAAA,EAAW,EAAA,yBAAA,CAA0B,EACnB,CAAS,EAAC,EAAV,KAAA,EAAA,EAAa,UAAA,CAAW,cAAA,CAAA,EAAkB,GAC5D,CAAC,EAAO,EAAS,CAAI,EAAA,IAAJ,GAAI,CAAM,cAAA,CAAe,EAAA,yBAAA,CAA2B,IAAI,QAU/E,CATA,CAAA,EAAA,AASI,EATJ,SAAA,EAAU,KACJ,CADU,EAId,EAAA,OAAA,CAAM,IAHe,WAGf,CAAgB,KACpB,CAD0B,EAE5B,CAAC,CACH,EAAG,CAAC,EAFU,AAEM,EAEf,EAAA,OAAA,CAAM,CAFQ,aAER,CAAe,IAInB,EAAA,EAJ2B,GAAG,EAI9B,CAAM,YAAA,CAAa,EAAU,CAClC,IAAK,MAAA,EAAA,KAAA,EAAA,EAAO,cAAA,CACZ,eAAgB,MAAA,EAAA,KAAA,EAAA,EAAO,cAAA,CACvB,8CAA+C,MAAA,EAAA,KAAA,EAAA,EAAO,QAAA,CACtD,uCAAwC,MAAA,EAAA,KAAA,EAAA,EAAO,UAAA,CAC/C,wCAAwC,CAC1C,CAAQ,EATC,CAUX"}