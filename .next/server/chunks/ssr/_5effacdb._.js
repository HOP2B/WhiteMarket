module.exports=[11421,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(41910),g=a.i(25259),h=a.i(71590),i=a.i(81176),j=b([i]);[i]=j.then?(await j)():j,a.s(["default",0,()=>{let{user:a}=(0,h.useAuth)(),b=(0,f.useRouter)(),{gigId:c}=b.query,[j,k]=(0,e.useState)(null),[l,m]=(0,e.useState)(!0),[n,o]=(0,e.useState)(!1);(0,e.useEffect)(()=>{(async()=>{if(c&&"string"==typeof c)try{let a=await (0,i.getGigById)(c);k(a)}catch(a){console.error("Error fetching gig:",a)}m(!1)})()},[c]);let p=async()=>{if(j&&a){o(!0);try{let c={amount:j.price,currency:"MNT",description:`Payment for ${j.title}`,callback_url:`${window.location.origin}/payment/callback`,merchant_id:process.env.NEXT_PUBLIC_QPAY_MERCHANT_ID};console.log("Creating QPay invoice:",c);let d={invoice_id:`QPAY_${Date.now()}`,qr_code:"https://api.qpay.mn/v2/qr?invoice_id=QPAY_"+Date.now(),payment_url:"https://qpay.mn/payment/"+Date.now()},e={id:Date.now().toString(),gig_id:j.id,buyer_id:a.id,seller_id:j.userId,amount:j.price,status:"pending",qpay_invoice_id:d.invoice_id,created_at:new Date().toISOString()};console.log("Creating order:",e),setTimeout(async()=>{alert(`QPay төлбөр амжилттай! ₮${j.price.toLocaleString()} төлөгдлөө.`),b.push("/dashboard")},3e3)}catch(a){console.error("QPay payment error:",a),alert("Төлбөр амжилтгүй боллоо. Дахин оролдоно уу.")}finally{o(!1)}}};return l?(0,d.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600"})}):a?j?(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(g.default,{}),(0,d.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),(0,d.jsxs)("div",{className:"flex items-center mb-4",children:[(0,d.jsx)("img",{src:j.userAvatar,alt:j.userName,className:"w-12 h-12 rounded-full mr-4"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-gray-900",children:j.title}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["by ",j.userName]})]})]}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:j.description}),(0,d.jsx)("div",{className:"border-t pt-4",children:(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-lg font-semibold",children:"Нийт:"}),(0,d.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["₮",j.price.toLocaleString()]})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Payment"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"Ready to hire this freelancer? Click below to complete your payment."}),(0,d.jsx)("button",{onClick:p,disabled:n,className:"w-full bg-green-600 text-white py-3 px-4 rounded-md hover:bg-green-700 disabled:opacity-50",children:n?"QPay төлбөр боловсруулж байна...":`QPay-р төлөх ₮${j.price.toLocaleString()}`})]})]})]})]})]}):(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(g.default,{}),(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gig not found"})})]}):(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(g.default,{}),(0,d.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Please login to checkout"})})]})}]),c()}catch(a){c(a)}},!1),50011,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(67298),i=a.i(11421),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/checkout",pathname:"/checkout",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/checkout",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=_5effacdb._.js.map