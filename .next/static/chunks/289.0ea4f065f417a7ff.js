"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{141:(e,t,r)=>{r.d(t,{h5:()=>s,jn:()=>i,qu:()=>n,sM:()=>c,z:()=>a,zF:()=>o});var n={InvalidSecretKey:"clerk_key_invalid"},i={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",RemoteJWKInvalid:"jwk-remote-invalid",RemoteJWKMissing:"jwk-remote-missing",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},a={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk-generated JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable.",EnsureClockSync:"Make sure your system clock is in sync (e.g. turn off and on automatic time synchronization)."},o=class e extends Error{constructor({action:t,message:r,reason:n}){super(r),Object.setPrototypeOf(this,e.prototype),this.reason=n,this.message=r,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}},s={TokenInvalid:"token-invalid",InvalidSecretKey:"secret-key-invalid",UnexpectedError:"unexpected-error",TokenVerificationFailed:"token-verification-failed"},c=class e extends Error{constructor({message:t,code:r,status:n,action:i}){super(t),Object.setPrototypeOf(this,e.prototype),this.code=r,this.status=n,this.action=i}getFullMessage(){return`${this.message} (code=${this.code}, status=${this.status||"n/a"})`}}},1825:(e,t,r)=>{r.d(t,{j:()=>n});function n(e){return e?`https://${e.replace(/clerk\.accountsstage\./,"accountsstage.").replace(/clerk\.accounts\.|clerk\./,"accounts.")}`:""}},1837:(e,t,r)=>{r.d(t,{y4:()=>c,p8:()=>o,dc:()=>s});var n=Object.getOwnPropertyNames;let i=((e,t)=>function(){return t||(0,e[n(e)[0]])((t={exports:{}}).exports,t),t.exports})({"src/runtime/browser/safe-node-apis.js"(e,t){t.exports={fs:void 0,path:void 0,cwd:void 0}}})();function a(e,t){if(!e)throw Error(`Clerk: ${t} is missing. This is an internal error. Please contact Clerk's support.`)}let o=()=>(a(i.fs,"fs"),i.fs),s=()=>(a(i.path,"path"),i.path),c=()=>(a(i.cwd,"cwd"),i.cwd)},3581:(e,t,r)=>{r.d(t,{n:()=>c});var n,i=r(507);r(4018),r(4976),r(141),r(6513);var a=r(7682);n=i.nr,async(...e)=>{let{data:t,errors:r}=await n(...e);if(r)throw r[0];return t};var o=r(8866);let s={secretKey:o.rB,publishableKey:o.At,apiUrl:o.H$,apiVersion:o.mG,userAgent:"@clerk/nextjs@6.36.8",proxyUrl:o.Rg,domain:o.V2,isSatellite:o.fS,machineSecretKey:o.Fx,sdkMetadata:o.tm,telemetry:{disabled:o.nN,debug:o.Mh}},c=e=>(function(e){let t={...e},r=(0,i.y3)(t),n=(0,i.Bs)({options:t,apiClient:r}),o=new a.RR({publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{},...t.telemetry||{}});return{...r,...n,telemetry:o}})({...s,...e})},4018:(e,t,r)=>{r.d(t,{io:()=>n.io,qS:()=>i.qS,ky:()=>i.ky,Ve:()=>i.mC,q5:()=>i.q5,L5:()=>a.L});var n=r(1724),i=r(3846),a=r(9125);(0,r(9597)._r)({packageName:"@clerk/backend"});var{isDevOrStagingUrl:o}=(0,i.RZ)()},4976:(e,t,r)=>{r.d(t,{l3:()=>g,qf:()=>h,iU:()=>v,nk:()=>m,fA:()=>s,J0:()=>y});var n=r(141);let i=crypto;var a=r(1965),o=fetch.bind(globalThis),s={crypto:i,get fetch(){return o},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},c={parse:(e,t)=>(function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let n=e.length;for(;"="===e[n-1];)if(--n,!r.loose&&!((e.length-n)*t.bits&7))throw SyntaxError("Invalid padding");let i=new(r.out??Uint8Array)(n*t.bits/8|0),a=0,o=0,s=0;for(let r=0;r<n;++r){let n=t.codes[e[r]];if(void 0===n)throw SyntaxError("Invalid character "+e[r]);o=o<<t.bits|n,(a+=t.bits)>=8&&(a-=8,i[s++]=255&o>>a)}if(a>=t.bits||255&o<<8-a)throw SyntaxError("Unexpected end of data");return i})(e,l,t)},l={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},d={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},u="RSASSA-PKCS1-v1_5",f={RS256:u,RS384:u,RS512:u},p=Object.keys(d),h=(e,t="JWT")=>{if(void 0===e)return;let r=Array.isArray(t)?t:[t];if(!r.includes(e))throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(e)}. Expected "${r.join(", ")}".`})},g=e=>{if(!p.includes(e))throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${p}.`})};async function m(e,t){let{header:r,signature:i,raw:o}=e,c=new TextEncoder().encode([o.header,o.payload].join(".")),l=function(e){let t=d[e],r=f[e];if(!t||!r)throw Error(`Unsupported algorithm ${e}, expected one of ${p.join(",")}.`);return{hash:{name:d[e]},name:f[e]}}(r.alg);try{let e=await function(e,t,r){if("object"==typeof e)return s.crypto.subtle.importKey("jwk",e,t,!1,[r]);let n=function(e){let t=e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=(0,a.y)(t),n=new Uint8Array(new ArrayBuffer(r.length));for(let e=0,t=r.length;e<t;e++)n[e]=r.charCodeAt(e);return n}(e),i="sign"===r?"pkcs8":"spki";return s.crypto.subtle.importKey(i,n,t,!1,[r])}(t,l,"verify");return{data:await s.crypto.subtle.verify(l.name,e,i,c)}}catch(e){return{errors:[new n.zF({reason:n.jn.TokenInvalidSignature,message:e?.message})]}}}function v(e){let t=(e||"").toString().split(".");if(3!==t.length)return{errors:[new n.zF({reason:n.jn.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,i,a]=t,o=new TextDecoder,s=JSON.parse(o.decode(c.parse(r,{loose:!0}))),l=JSON.parse(o.decode(c.parse(i,{loose:!0})));return{data:{header:s,payload:l,signature:c.parse(a,{loose:!0}),raw:{header:r,payload:i,signature:a,text:e}}}}async function y(e,t){let{audience:r,authorizedParties:i,clockSkewInMs:a,key:o,headerType:s}=t,c=a||5e3,{data:l,errors:d}=v(e);if(d)return{errors:d};let{header:u,payload:f}=l;try{let{typ:e,alg:t}=u;h(e,s),g(t);let{azp:a,sub:o,aud:l,iat:d,exp:p,nbf:m}=f;if("string"!=typeof o)throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(o)}.`});((e,t)=>{let r=[t].flat().filter(e=>!!e),i=[e].flat().filter(e=>!!e);if(r.length>0&&i.length>0)if("string"==typeof e){if(!r.includes(e))throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else{let t;if(t=e,Array.isArray(t)&&t.length>0&&t.every(e=>"string"==typeof e)&&!e.some(e=>r.includes(e)))throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}})([l],[r]);if(a&&i&&0!==i.length&&!i.includes(a))throw new n.zF({reason:n.jn.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(a)}. Expected "${i}".`});if("number"!=typeof p)throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(p)}. Expected number.`});let v=new Date(Date.now()),y=new Date(0);if(y.setUTCSeconds(p),y.getTime()<=v.getTime()-c)throw new n.zF({reason:n.jn.TokenExpired,message:`JWT is expired. Expiry date: ${y.toUTCString()}, Current date: ${v.toUTCString()}.`});((e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),i=new Date(0);if(i.setUTCSeconds(e),i.getTime()>r.getTime()+t)throw new n.zF({reason:n.jn.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${i.toUTCString()}; Current date: ${r.toUTCString()};`})})(m,c),((e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),i=new Date(0);if(i.setUTCSeconds(e),i.getTime()>r.getTime()+t)throw new n.zF({reason:n.jn.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${i.toUTCString()}; Current date: ${r.toUTCString()};`})})(d,c)}catch(e){return{errors:[e]}}let{data:p,errors:y}=await m(l,o);return y?{errors:[new n.zF({action:n.z.EnsureClerkJWT,reason:n.jn.TokenVerificationFailed,message:`Error verifying JWT signature. ${y[0]}`})]}:p?{data:f}:{errors:[new n.zF({reason:n.jn.TokenInvalidSignature,message:"JWT signature is invalid."})]}}},6337:(e,t,r)=>{r.d(t,{Y:()=>i});var n=r(883);let i=e=>{let t,r,i,a,o=e.fva??null,s=e.sts??null;if(2===e.v){if(e.o){t=e.o?.id,i=e.o?.slg,e.o?.rol&&(r=`org:${e.o?.rol}`);let{org:o}=(0,n._F)(e.fea),{permissions:s,featurePermissionMap:c}=(({per:e,fpm:t})=>{if(!e||!t)return{permissions:[],featurePermissionMap:[]};let r=e.split(",").map(e=>e.trim());return{permissions:r,featurePermissionMap:t.split(",").map(e=>Number.parseInt(e.trim(),10)).map(e=>e.toString(2).padStart(r.length,"0").split("").map(e=>Number.parseInt(e,10)).reverse()).filter(Boolean)}})({per:e.o?.per,fpm:e.o?.fpm});a=function({features:e,permissions:t,featurePermissionMap:r}){if(!e||!t||!r)return[];let n=[];for(let i=0;i<e.length;i++){let a=e[i];if(i>=r.length)continue;let o=r[i];if(o)for(let e=0;e<o.length;e++)1===o[e]&&n.push(`org:${a}:${t[e]}`)}return n}({features:o,featurePermissionMap:c,permissions:s})}}else t=e.org_id,r=e.org_role,i=e.org_slug,a=e.org_permissions;return{sessionClaims:e,sessionId:e.sid,sessionStatus:s,actor:e.act,userId:e.sub,orgId:t,orgRole:r,orgSlug:i,orgPermissions:a,factorVerificationAge:o}}},6513:(e,t,r)=>{r.d(t,{P$:()=>d,VK:()=>f,f1:()=>u,jq:()=>p});var n=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,l=e=>{throw TypeError(e)},d=(e,t)=>function(){return t||(0,e[o(e)[0]])((t={exports:{}}).exports,t),t.exports},u=(e,t,r)=>(r=null!=e?n(s(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of o(t))c.call(e,r)||void 0===r||i(e,r,{get:()=>t[r],enumerable:!(n=a(t,r))||n.enumerable});return e})(!t&&e&&e.__esModule?r:i(r,"default",{value:e,enumerable:!0}),e)),f=(e,t,r)=>t.has(e)?l("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),p=(e,t,r)=>(t.has(e)||l("Cannot access private method"),r)},9982:(e,t,r)=>{function n(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function i(e){return e&&e.sensitive?"":"i"}r.d(t,{Y:()=>a});function a(e,t){try{var r,a,o,s,c,l;return r=[],a=function e(t,r,a){var o;return t instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,i=r.exec(e.source);i;)t.push({name:i[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),i=r.exec(e.source);return e}(t,r):Array.isArray(t)?(o=t.map(function(t){return e(t,r,a).source}),new RegExp("(?:".concat(o.join("|"),")"),i(a))):function(e,t,r){void 0===r&&(r={});for(var a=r.strict,o=void 0!==a&&a,s=r.start,c=r.end,l=r.encode,d=void 0===l?function(e){return e}:l,u=r.delimiter,f=r.endsWith,p="[".concat(n(void 0===f?"":f),"]|$"),h="[".concat(n(void 0===u?"/#?":u),"]"),g=void 0===s||s?"^":"",m=0;m<e.length;m++){var v=e[m];if("string"==typeof v)g+=n(d(v));else{var y=n(d(v.prefix)),T=n(d(v.suffix));if(v.pattern)if(t&&t.push(v),y||T)if("+"===v.modifier||"*"===v.modifier){var k="*"===v.modifier?"?":"";g+="(?:".concat(y,"((?:").concat(v.pattern,")(?:").concat(T).concat(y,"(?:").concat(v.pattern,"))*)").concat(T,")").concat(k)}else g+="(?:".concat(y,"(").concat(v.pattern,")").concat(T,")").concat(v.modifier);else{if("+"===v.modifier||"*"===v.modifier)throw TypeError('Can not repeat "'.concat(v.name,'" without a prefix and suffix'));g+="(".concat(v.pattern,")").concat(v.modifier)}else g+="(?:".concat(y).concat(T,")").concat(v.modifier)}}if(void 0===c||c)o||(g+="".concat(h,"?")),g+=r.endsWith?"(?=".concat(p,")"):"$";else{var w=e[e.length-1],b="string"==typeof w?h.indexOf(w[w.length-1])>-1:void 0===w;o||(g+="(?:".concat(h,"(?=").concat(p,"))?")),b||(g+="(?=".concat(h,"|").concat(p,")"))}return new RegExp(g,i(r))}(function(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var n=e[r];if("*"===n||"+"===n||"?"===n){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===n){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===n){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===n){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===n){for(var i="",a=r+1;a<e.length;){var o=e.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||95===o){i+=e[a++];continue}break}if(!i)throw TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:i}),r=a;continue}if("("===n){var s=1,c="",a=r+1;if("?"===e[a])throw TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<e.length;){if("\\"===e[a]){c+=e[a++]+e[a++];continue}if(")"===e[a]){if(0==--s){a++;break}}else if("("===e[a]&&(s++,"?"!==e[a+1]))throw TypeError("Capturing groups are not allowed at ".concat(a));c+=e[a++]}if(s)throw TypeError("Unbalanced pattern at ".concat(r));if(!c)throw TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:c}),r=a;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,a=void 0===i?"./":i,o=t.delimiter,s=void 0===o?"/#?":o,c=[],l=0,d=0,u="",f=function(e){if(d<r.length&&r[d].type===e)return r[d++].value},p=function(e){var t=f(e);if(void 0!==t)return t;var n=r[d],i=n.type,a=n.index;throw TypeError("Unexpected ".concat(i," at ").concat(a,", expected ").concat(e))},h=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t},g=function(e){for(var t=0;t<s.length;t++){var r=s[t];if(e.indexOf(r)>-1)return!0}return!1},m=function(e){var t=c[c.length-1],r=e||(t&&"string"==typeof t?t:"");if(t&&!r)throw TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!r||g(r)?"[^".concat(n(s),"]+?"):"(?:(?!".concat(n(r),")[^").concat(n(s),"])+?")};d<r.length;){var v=f("CHAR"),y=f("NAME"),T=f("PATTERN");if(y||T){var k=v||"";-1===a.indexOf(k)&&(u+=k,k=""),u&&(c.push(u),u=""),c.push({name:y||l++,prefix:k,suffix:"",pattern:T||m(k),modifier:f("MODIFIER")||""});continue}var w=v||f("ESCAPED_CHAR");if(w){u+=w;continue}if(u&&(c.push(u),u=""),f("OPEN")){var k=h(),b=f("NAME")||"",x=f("PATTERN")||"",E=h();p("CLOSE"),c.push({name:b||(x?l++:""),pattern:b&&!x?m(k):x,prefix:k,suffix:E,modifier:f("MODIFIER")||""});continue}p("END")}return c}(t,a),r,a)}(e,r,t),o=r,s=t,void 0===s&&(s={}),c=s.decode,l=void 0===c?function(e){return e}:c,function(e){var t=a.exec(e);if(!t)return!1;for(var r=t[0],n=t.index,i=Object.create(null),s=1;s<t.length;s++)!function(e){if(void 0!==t[e]){var r=o[e-1];"*"===r.modifier||"+"===r.modifier?i[r.name]=t[e].split(r.prefix+r.suffix).map(function(e){return l(e,r)}):i[r.name]=l(t[e],r)}}(s);return{path:r,index:n,params:i}}}catch(e){throw Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${e.message}`)}}}}]);