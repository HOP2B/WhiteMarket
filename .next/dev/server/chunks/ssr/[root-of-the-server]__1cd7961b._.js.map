{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":["file:///Users/khangaijagaa/Documents/projects/white-market/components/NotificationDropdown.tsx"],"sourcesContent":["import React from \"react\";\nimport { useNotifications } from \"../context/NotificationContext\";\nimport { useRouter } from \"next/router\";\n\nconst NotificationDropdown: React.FC = () => {\n  const {\n    notifications,\n    unreadCount,\n    isLoading,\n    markAsRead,\n    markAllAsRead,\n    deleteNotification,\n    showNotifications,\n    toggleNotifications,\n  } = useNotifications();\n  const router = useRouter();\n\n  const handleNotificationClick = async (notification: any) => {\n    if (!notification.read) {\n      await markAsRead(notification.id);\n    }\n\n    if (notification.actionUrl) {\n      router.push(notification.actionUrl);\n    }\n\n    toggleNotifications();\n  };\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case \"order\":\n        return \"üì¶\";\n      case \"message\":\n        return \"üí¨\";\n      case \"payment\":\n        return \"üí≥\";\n      case \"system\":\n        return \"üîî\";\n      default:\n        return \"üì¢\";\n    }\n  };\n\n  const formatTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const date = new Date(dateString);\n    const diffInMinutes = Math.floor(\n      (now.getTime() - date.getTime()) / (1000 * 60),\n    );\n\n    if (diffInMinutes < 1) return \"–î”©–Ω–≥”©–∂ —Å–∞—è\";\n    if (diffInMinutes < 60) return `${diffInMinutes} –º–∏–Ω ”©–º–Ω”©`;\n\n    const diffInHours = Math.floor(diffInMinutes / 60);\n    if (diffInHours < 24) return `${diffInHours} —Ü–∞–≥ ”©–º–Ω”©`;\n\n    const diffInDays = Math.floor(diffInHours / 24);\n    if (diffInDays < 7) return `${diffInDays} ”©–¥”©—Ä ”©–º–Ω”©`;\n\n    return date.toLocaleDateString(\"mn-MN\");\n  };\n\n  if (!showNotifications) return null;\n\n  return (\n    <div className=\"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-200\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-gray-900\">–ú—ç–¥—ç–≥–¥—ç–ª</h3>\n          {unreadCount > 0 && (\n            <button\n              onClick={markAllAsRead}\n              className=\"text-sm text-green-600 hover:text-green-700\"\n            >\n              –ë“Ø–≥–¥–∏–π–≥ —É–Ω—à—Å–∞–Ω –±–æ–ª–≥–æ—Ö\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Notifications List */}\n      <div className=\"max-h-96 overflow-y-auto\">\n        {isLoading ? (\n          <div className=\"p-4 text-center\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-t-2 border-b-2 border-green-600 mx-auto\"></div>\n          </div>\n        ) : notifications.length > 0 ? (\n          notifications.map((notification) => (\n            <div\n              key={notification.id}\n              className={`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${\n                !notification.read ? \"bg-blue-50\" : \"\"\n              }`}\n              onClick={() => handleNotificationClick(notification)}\n            >\n              <div className=\"flex items-start space-x-3\">\n                <div className=\"text-2xl\">\n                  {getNotificationIcon(notification.type)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <p className=\"text-sm font-medium text-gray-900 truncate\">\n                      {notification.title}\n                    </p>\n                    {!notification.read && (\n                      <div className=\"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0\"></div>\n                    )}\n                  </div>\n                  <p className=\"text-sm text-gray-600 mt-1 line-clamp-2\">\n                    {notification.message}\n                  </p>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    {formatTimeAgo(notification.createdAt)}\n                  </p>\n                </div>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    deleteNotification(notification.id);\n                  }}\n                  className=\"text-gray-400 hover:text-red-600 text-sm p-1\"\n                  title=\"–£—Å—Ç–≥–∞—Ö\"\n                >\n                  ‚úï\n                </button>\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"p-8 text-center\">\n            <div className=\"text-4xl mb-3\">üîî</div>\n            <p className=\"text-gray-500\">–ú—ç–¥—ç–≥–¥—ç–ª –±–∞–π—Ö–≥“Ø–π –±–∞–π–Ω–∞</p>\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      {notifications.length > 0 && (\n        <div className=\"p-3 border-t border-gray-200 text-center\">\n          <button\n            onClick={() => {\n              router.push(\"/notifications\");\n              toggleNotifications();\n            }}\n            className=\"text-sm text-green-600 hover:text-green-700\"\n          >\n            –ë“Ø—Ö –º—ç–¥—ç–≥–¥–ª–∏–π–≥ —Ö–∞—Ä–∞—Ö\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NotificationDropdown;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///Users/khangaijagaa/Documents/projects/white-market/components/Navbar.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useNotifications } from \"../context/NotificationContext\";\nimport { UserButton } from \"@clerk/nextjs\";\nimport NotificationDropdown from \"./NotificationDropdown\";\n\nconst Navbar: React.FC = () => {\n  const { user } = useAuth();\n  const { unreadCount, toggleNotifications } = useNotifications();\n  const [isOpen, setIsOpen] = useState(false);\n\n  return (\n    <nav className=\"bg-white shadow-sm border-b sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between h-16 lg:grid lg:grid-cols-3 lg:items-center\">\n          <div className=\"flex\">\n            <div className=\"flex-shrink-0 flex items-center\">\n              <Link href=\"/\" className=\"text-xl font-bold text-blue-600\">\n                White Market\n              </Link>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center\">\n              <input\n                type=\"text\"\n                placeholder=\"Search services...\"\n                className=\"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500\"\n              />\n            </div>\n            {user ? (\n              <div className=\"flex items-center space-x-4\">\n                <Link\n                  href=\"/jobs\"\n                  className=\"text-gray-700 hover:text-green-600 transition-colors duration-200\"\n                >\n                  “Æ–π–ª—á–∏–ª–≥—ç—ç\n                </Link>\n                <Link\n                  href=\"/dashboard\"\n                  className=\"text-gray-700 hover:text-green-600 transition-colors duration-200\"\n                >\n                  Dashboard\n                </Link>\n                <Link\n                  href=\"/messages\"\n                  className=\"text-gray-700 hover:text-green-600 transition-colors duration-200\"\n                >\n                  Messages\n                </Link>\n\n                {/* Notification Bell */}\n                <div className=\"relative\">\n                  <button\n                    onClick={toggleNotifications}\n                    className=\"relative p-2 text-gray-700 hover:text-green-600 transition-colors duration-200\"\n                    title=\"–ú—ç–¥—ç–≥–¥—ç–ª\"\n                  >\n                    <span className=\"text-xl\">üîî</span>\n                    {unreadCount > 0 && (\n                      <span className=\"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center\">\n                        {unreadCount > 9 ? \"9+\" : unreadCount}\n                      </span>\n                    )}\n                  </button>\n                  <NotificationDropdown />\n                </div>\n\n                <UserButton\n                  appearance={{\n                    elements: {\n                      avatarBox: \"w-8 h-8\",\n                    },\n                  }}\n                />\n              </div>\n            ) : (\n              <div className=\"flex items-center space-x-4\">\n                <Link\n                  href=\"/login\"\n                  className=\"text-gray-700 hover:text-green-600 transition-colors duration-200\"\n                >\n                  Login\n                </Link>\n                <Link\n                  href=\"/register\"\n                  className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors duration-200\"\n                >\n                  Sign Up\n                </Link>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default Navbar;\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAEA,MAAM,SAAmB;IACvB,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,2HAAO;IACxB,MAAM,EAAE,WAAW,EAAE,mBAAmB,EAAE,GAAG,IAAA,4IAAgB;IAC7D,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IAErC,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC;YAAI,WAAU;sBACb,cAAA,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAI,WAAU;sCACb,cAAA,qKAAC,gIAAI;gCAAC,MAAK;gCAAI,WAAU;0CAAkC;;;;;;;;;;;;;;;;kCAK/D,qKAAC;wBAAI,WAAU;;0CACb,qKAAC;gCAAI,WAAU;0CACb,cAAA,qKAAC;oCACC,MAAK;oCACL,aAAY;oCACZ,WAAU;;;;;;;;;;;4BAGb,qBACC,qKAAC;gCAAI,WAAU;;kDACb,qKAAC,gIAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;kDAGD,qKAAC,gIAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;kDAGD,qKAAC,gIAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;kDAKD,qKAAC;wCAAI,WAAU;;0DACb,qKAAC;gDACC,SAAS;gDACT,WAAU;gDACV,OAAM;;kEAEN,qKAAC;wDAAK,WAAU;kEAAU;;;;;;oDACzB,cAAc,mBACb,qKAAC;wDAAK,WAAU;kEACb,cAAc,IAAI,OAAO;;;;;;;;;;;;0DAIhC,qKAAC,uIAAoB;;;;;;;;;;;kDAGvB,qKAAC,8KAAU;wCACT,YAAY;4CACV,UAAU;gDACR,WAAW;4CACb;wCACF;;;;;;;;;;;yFAIJ,qKAAC;gCAAI,WAAU;;kDACb,qKAAC,gIAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;kDAGD,qKAAC,gIAAI;wCACH,MAAK;wCACL,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUjB;uCAEe"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///Users/khangaijagaa/Documents/projects/white-market/pages/messages.tsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Navbar from \"../components/Navbar\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { useNotifications } from \"../context/NotificationContext\";\nimport {\n  getMessages,\n  sendMessage,\n  getUserById,\n  searchUsers,\n  markMessagesAsRead,\n} from \"../api/mockApi\";\nimport { supabase } from \"../lib/supabase\";\n\ninterface Message {\n  id: string;\n  senderId: string;\n  receiverId: string;\n  content: string;\n  timestamp: string;\n  status: \"sent\" | \"delivered\" | \"read\";\n  file?: {\n    name: string;\n    size: number;\n    type: string;\n    url: string;\n  };\n}\n\ninterface UserStatus {\n  [userId: string]: {\n    isOnline: boolean;\n    lastSeen: string;\n    isTyping: boolean;\n  };\n}\n\nconst Messages: React.FC = () => {\n  const { user } = useAuth();\n  const { addNotification } = useNotifications();\n  const router = useRouter();\n  const { contact } = router.query;\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [selectedConversation, setSelectedConversation] = useState<\n    string | null\n  >(null);\n  const [conversationUsers, setConversationUsers] = useState<any>({});\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [userStatuses, setUserStatuses] = useState<UserStatus>({});\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [userSearchQuery, setUserSearchQuery] = useState(\"\");\n  const [userSearchResults, setUserSearchResults] = useState<any[]>([]);\n  const [showUserSearch, setShowUserSearch] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [showEmojiPicker, setShowEmojiPicker] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (user) {\n      const fetchMessages = async () => {\n        try {\n          const data = (await getMessages(user.id)) as any[];\n          setMessages(data);\n\n          // Fetch user data for conversations\n          const userIds = Array.from(\n            new Set(\n              data.map((msg) =>\n                msg.senderId === user.id ? msg.receiverId : msg.senderId,\n              ),\n            ),\n          );\n\n          const userPromises = userIds.map((id) => getUserById(id));\n          const users = await Promise.all(userPromises);\n          const userMap: any = {};\n          users.forEach((u, index) => {\n            userMap[userIds[index]] = u;\n          });\n          setConversationUsers(userMap);\n\n          setLoading(false);\n        } catch (error) {\n          console.error(\"Error fetching messages:\", error);\n          setLoading(false);\n        }\n      };\n\n      fetchMessages();\n\n      // Subscribe to new messages\n      const subscription = supabase\n        .channel(\"messages\")\n        .on(\n          \"postgres_changes\",\n          {\n            event: \"INSERT\",\n            schema: \"public\",\n            table: \"messages\",\n          },\n          (payload) => {\n            const dbMessage = payload.new;\n            const newMessage: Message = {\n              id: dbMessage.id,\n              senderId: dbMessage.sender_id,\n              receiverId: dbMessage.receiver_id,\n              content: dbMessage.content,\n              timestamp: dbMessage.timestamp,\n              status: dbMessage.status || \"sent\",\n              file: dbMessage.file,\n            };\n            if (\n              newMessage.senderId === user.id ||\n              newMessage.receiverId === user.id\n            ) {\n              setMessages((prev) => [...prev, newMessage]);\n\n              // Add notification if not currently viewing this conversation\n              if (\n                newMessage.senderId !== user.id &&\n                selectedConversation !== newMessage.senderId\n              ) {\n                const sender = conversationUsers[newMessage.senderId];\n                addNotification({\n                  type: \"message\",\n                  title: `New message from ${sender?.name || \"Unknown\"}`,\n                  message: newMessage.content || \"Sent a file\",\n                  actionUrl: `/messages?contact=${newMessage.senderId}`,\n                });\n              }\n            }\n          },\n        )\n        .subscribe();\n\n      return () => {\n        subscription.unsubscribe();\n      };\n    }\n  }, [user]);\n\n  useEffect(() => {\n    if (contact && typeof contact === \"string\") {\n      setSelectedConversation(contact);\n    }\n  }, [contact]);\n\n  useEffect(() => {\n    if (selectedConversation && user) {\n      const unreadMessages = messages.filter(\n        (msg) =>\n          msg.receiverId === user.id &&\n          msg.senderId === selectedConversation &&\n          msg.status !== \"read\",\n      );\n      if (unreadMessages.length > 0) {\n        const messageIds = unreadMessages.map((msg) => msg.id);\n        markMessagesAsRead(messageIds).catch(console.error);\n        // Update local state\n        setMessages((prev) =>\n          prev.map((msg) =>\n            messageIds.includes(msg.id) ? { ...msg, status: \"read\" } : msg,\n          ),\n        );\n      }\n    }\n  }, [selectedConversation, messages, user]);\n\n  const handleSendMessage = async () => {\n    if ((!newMessage.trim() && !selectedFile) || !user || !selectedConversation)\n      return;\n\n    try {\n      const message: Message = {\n        id: Date.now().toString(),\n        senderId: user.id,\n        receiverId: selectedConversation,\n        content: newMessage,\n        timestamp: new Date().toISOString(),\n        status: \"sent\",\n      };\n\n      if (selectedFile) {\n        // Simulate file upload\n        message.file = {\n          name: selectedFile.name,\n          size: selectedFile.size,\n          type: selectedFile.type,\n          url: URL.createObjectURL(selectedFile), // In production, this would be uploaded to cloud storage\n        };\n      }\n\n      const sentMessage = await sendMessage(message);\n      setMessages([...messages, sentMessage]);\n      setNewMessage(\"\");\n      setSelectedFile(null);\n\n      // Stop typing indicator\n      setIsTyping(false);\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n    }\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n    }\n  };\n\n  const handleTyping = () => {\n    if (!isTyping && selectedConversation) {\n      setIsTyping(true);\n      // In a real app, you'd emit a typing event to the other user\n      console.log(\"User is typing...\");\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout to stop typing indicator\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n      console.log(\"User stopped typing\");\n    }, 2000);\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, selectedConversation]);\n\n  const conversations = Array.from(\n    new Set(\n      messages.map((msg) =>\n        msg.senderId === user?.id ? msg.receiverId : msg.senderId,\n      ),\n    ),\n  );\n\n  const filteredConversations = conversations.filter((conversationId) => {\n    const otherUser = conversationUsers[conversationId];\n    return (\n      !searchQuery ||\n      otherUser?.name?.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n  });\n\n  const getUnreadCount = (conversationId: string) => {\n    return messages.filter(\n      (msg) =>\n        msg.receiverId === user?.id &&\n        msg.senderId === conversationId &&\n        msg.status !== \"read\",\n    ).length;\n  };\n\n  const handleUserSearch = async (query: string) => {\n    if (query.trim().length < 2) {\n      setUserSearchResults([]);\n      return;\n    }\n    try {\n      const results = await searchUsers(query);\n      setUserSearchResults(results.filter((u) => u.id !== user?.id));\n    } catch (error) {\n      console.error(\"Error searching users:\", error);\n      setUserSearchResults([]);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-screen bg-gradient-to-br from-green-50 to-white\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-600\"></div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-green-50 to-white\">\n        <Navbar />\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <h1 className=\"text-2xl font-bold text-green-800 animate-fade-in\">\n            Please login to view messages\n          </h1>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-white\">\n      <Navbar />\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <h1 className=\"text-3xl font-bold text-blue-800 mb-8 animate-fade-in\">\n          Messages\n        </h1>\n\n        <div className=\"flex flex-col lg:flex-row gap-8\">\n          <div className=\"lg:w-1/4 bg-white rounded-xl shadow-lg border border-blue-100 overflow-hidden animate-slide-in-left\">\n            <div className=\"p-4 border-b border-blue-200 bg-blue-50\">\n              <div className=\"flex justify-between items-center mb-2\">\n                <h2 className=\"text-xl font-bold text-blue-800\">\n                  {showUserSearch ? \"Search Users\" : \"Conversations\"}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowUserSearch(!showUserSearch);\n                    setUserSearchQuery(\"\");\n                    setUserSearchResults([]);\n                  }}\n                  className=\"text-green-600 hover:text-green-700 text-sm font-medium transition-colors duration-200 hover:scale-105\"\n                >\n                  {showUserSearch ? \"Back to Conversations\" : \"Search Users\"}\n                </button>\n              </div>\n              {showUserSearch ? (\n                <input\n                  type=\"text\"\n                  placeholder=\"Search users by name...\"\n                  value={userSearchQuery}\n                  onChange={(e) => {\n                    setUserSearchQuery(e.target.value);\n                    handleUserSearch(e.target.value);\n                  }}\n                  className=\"w-full px-3 py-2 border border-blue-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200\"\n                />\n              ) : (\n                <input\n                  type=\"text\"\n                  placeholder=\"–•–∞–π—Ö...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200\"\n                />\n              )}\n            </div>\n            <div className=\"divide-y divide-gray-200 max-h-96 overflow-y-auto\">\n              {showUserSearch\n                ? userSearchResults.map((userResult) => (\n                    <div\n                      key={userResult.id}\n                      className=\"p-4 cursor-pointer hover:bg-blue-50 transition-all duration-200 hover:shadow-sm animate-fade-in\"\n                      onClick={() => {\n                        setSelectedConversation(userResult.id);\n                        setShowUserSearch(false);\n                        setUserSearchQuery(\"\");\n                        setUserSearchResults([]);\n                        // Add user to conversationUsers if not already there\n                        setConversationUsers((prev) => ({\n                          ...prev,\n                          [userResult.id]: userResult,\n                        }));\n                      }}\n                    >\n                      <div className=\"flex items-center\">\n                        <img\n                          src={userResult.avatar || \"/default-avatar.jpg\"}\n                          alt={userResult.name}\n                          className=\"w-10 h-10 rounded-full mr-3\"\n                        />\n                        <div className=\"flex-1\">\n                          <p className=\"font-semibold text-gray-900\">\n                            {userResult.name}\n                          </p>\n                          <p className=\"text-sm text-gray-500\">\n                            {userResult.bio || \"No bio available\"}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n                  ))\n                : filteredConversations.map((conversationId) => {\n                    const conversationMessages = messages.filter(\n                      (msg) =>\n                        (msg.senderId === user?.id &&\n                          msg.receiverId === conversationId) ||\n                        (msg.senderId === conversationId &&\n                          msg.receiverId === user?.id),\n                    );\n                    const lastMessage =\n                      conversationMessages[conversationMessages.length - 1];\n                    const otherUser = conversationUsers[conversationId];\n                    const unreadCount = getUnreadCount(conversationId);\n                    const userStatus = userStatuses[conversationId];\n\n                    return (\n                      <div\n                        key={conversationId}\n                        className={`p-4 cursor-pointer hover:bg-green-50 transition-all duration-200 hover:shadow-md ${\n                          selectedConversation === conversationId\n                            ? \"bg-green-100 border-l-4 border-green-500\"\n                            : \"\"\n                        }`}\n                        onClick={() => setSelectedConversation(conversationId)}\n                      >\n                        <div className=\"flex items-center\">\n                          <div className=\"relative\">\n                            <img\n                              src={otherUser?.avatar || \"/default-avatar.jpg\"}\n                              alt={otherUser?.name || \"User\"}\n                              className=\"w-10 h-10 rounded-full mr-3\"\n                            />\n                            {userStatus?.isOnline && (\n                              <div className=\"absolute bottom-0 right-3 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></div>\n                            )}\n                          </div>\n                          <div className=\"flex-1\">\n                            <div className=\"flex justify-between items-center\">\n                              <p className=\"font-semibold text-gray-900\">\n                                {otherUser?.name || `User ${conversationId}`}\n                              </p>\n                              {lastMessage && (\n                                <p className=\"text-xs text-gray-500\">\n                                  {new Date(\n                                    lastMessage.timestamp,\n                                  ).toLocaleDateString()}\n                                </p>\n                              )}\n                            </div>\n                            <div className=\"flex justify-between items-center\">\n                              <p className=\"text-sm text-gray-500 truncate flex-1\">\n                                {lastMessage?.content || \"No messages yet\"}\n                              </p>\n                              {unreadCount > 0 && (\n                                <span className=\"bg-green-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center ml-2 animate-pulse shadow-lg\">\n                                  {unreadCount}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n            </div>\n          </div>\n\n          <div className=\"lg:w-3/4 bg-white rounded-xl shadow-lg border border-blue-100 animate-slide-in-right\">\n            <div className=\"p-4 border-b border-blue-200 bg-blue-50\">\n              <h2 className=\"text-xl font-bold text-blue-800\">Conversation</h2>\n            </div>\n\n            <div className=\"p-4 h-96 overflow-y-auto\">\n              {selectedConversation ? (\n                <>\n                  {(() => {\n                    const conversationMessages = messages.filter(\n                      (msg) =>\n                        (msg.senderId === user.id &&\n                          msg.receiverId === selectedConversation) ||\n                        (msg.senderId === selectedConversation &&\n                          msg.receiverId === user.id),\n                    );\n                    const lastReadMessage = conversationMessages\n                      .filter(\n                        (msg) =>\n                          msg.senderId === user.id && msg.status === \"read\",\n                      )\n                      .sort(\n                        (a, b) =>\n                          new Date(b.timestamp).getTime() -\n                          new Date(a.timestamp).getTime(),\n                      )[0];\n                    const otherUser = conversationUsers[selectedConversation];\n\n                    return conversationMessages.map((message) => (\n                      <div\n                        key={message.id}\n                        className={`mb-4 flex ${\n                          message.senderId === user.id\n                            ? \"justify-end\"\n                            : \"justify-start\"\n                        }`}\n                      >\n                        <div\n                          className={`max-w-xs lg:max-w-md rounded-2xl p-4 shadow-sm transition-all duration-300 animate-fade-in ${\n                            message.senderId === user.id\n                              ? \"bg-blue-500 text-white ml-auto\"\n                              : \"bg-white text-gray-900 border border-blue-200\"\n                          }`}\n                        >\n                          {message.file && (\n                            <div className=\"mb-2\">\n                              <div className=\"bg-black bg-opacity-20 rounded p-2\">\n                                <div className=\"flex items-center\">\n                                  <span className=\"text-xs mr-2\">üìé</span>\n                                  <div>\n                                    <p className=\"text-xs font-medium\">\n                                      {message.file.name}\n                                    </p>\n                                    <p className=\"text-xs opacity-75\">\n                                      {(message.file.size / 1024).toFixed(1)} KB\n                                    </p>\n                                  </div>\n                                </div>\n                                {message.file.type.startsWith(\"image/\") && (\n                                  <img\n                                    src={message.file.url}\n                                    alt={message.file.name}\n                                    className=\"mt-2 max-w-full h-auto rounded\"\n                                    style={{ maxHeight: \"200px\" }}\n                                  />\n                                )}\n                              </div>\n                            </div>\n                          )}\n                          {message.content && (\n                            <p className=\"text-sm\">{message.content}</p>\n                          )}\n                          <div className=\"flex items-center justify-between mt-1\">\n                            <p\n                              className={`text-xs ${\n                                message.senderId === user.id\n                                  ? \"text-blue-100\"\n                                  : \"text-gray-500\"\n                              }`}\n                            >\n                              {new Date(message.timestamp).toLocaleTimeString()}\n                            </p>\n                            <div className=\"flex items-center\">\n                              {message.senderId === user.id &&\n                                lastReadMessage?.id === message.id && (\n                                  <img\n                                    src={\n                                      otherUser?.avatar || \"/default-avatar.jpg\"\n                                    }\n                                    alt=\"Read by\"\n                                    className=\"w-4 h-4 rounded-full mr-1\"\n                                  />\n                                )}\n                              {message.senderId === user.id && (\n                                <span className=\"text-xs text-blue-100\">\n                                  {message.status === \"sent\" && \"‚úì\"}\n                                  {message.status === \"delivered\" && \"‚úì‚úì\"}\n                                  {message.status === \"read\" && \"‚úì‚úì\"}\n                                </span>\n                              )}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ));\n                  })()}\n                  {/* Typing Indicator */}\n                  {userStatuses[selectedConversation]?.isTyping && (\n                    <div className=\"mb-4 flex justify-start animate-fade-in\">\n                      <div className=\"bg-white text-gray-900 rounded-2xl p-4 border border-green-200 shadow-sm\">\n                        <div className=\"flex items-center space-x-2\">\n                          <div className=\"flex space-x-1\">\n                            <div className=\"w-2 h-2 bg-green-500 rounded-full animate-bounce\"></div>\n                            <div\n                              className=\"w-2 h-2 bg-green-500 rounded-full animate-bounce\"\n                              style={{ animationDelay: \"0.1s\" }}\n                            ></div>\n                            <div\n                              className=\"w-2 h-2 bg-green-500 rounded-full animate-bounce\"\n                              style={{ animationDelay: \"0.2s\" }}\n                            ></div>\n                          </div>\n                          <span className=\"text-xs text-green-600 ml-2\">\n                            –ë–∏—á–∏–∂ –±–∞–π–Ω–∞...\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  <div ref={messagesEndRef} />\n                </>\n              ) : (\n                <div className=\"flex items-center justify-center h-full animate-fade-in\">\n                  <p className=\"text-green-600 text-lg\">\n                    –•–∞—Ä–∏–ª—Ü–∞–≥—á–∏–π–≥ —Å–æ–Ω–≥–æ–æ–¥ –∑—É—Ä–≤–∞—Å –±–∏—á–∏—Ö –±–æ–ª–æ–º–∂—Ç–æ–π\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {selectedConversation && (\n              <div className=\"p-4 border-t border-blue-200 bg-blue-50\">\n                {selectedFile && (\n                  <div className=\"mb-2 p-3 bg-white rounded-lg border border-blue-200 flex items-center justify-between shadow-sm animate-slide-in-up\">\n                    <div className=\"flex items-center\">\n                      <span className=\"text-blue-600 mr-2\">üìé</span>\n                      <span className=\"text-sm text-gray-700\">\n                        {selectedFile.name}\n                      </span>\n                    </div>\n                    <button\n                      onClick={() => setSelectedFile(null)}\n                      className=\"text-red-500 hover:text-red-700 text-sm transition-colors duration-200 hover:scale-110\"\n                    >\n                      ‚úï\n                    </button>\n                  </div>\n                )}\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                    className=\"bg-white text-blue-600 px-4 py-3 rounded-xl hover:bg-blue-50 transition-all duration-200 hover:scale-105 shadow-sm border border-blue-200\"\n                  >\n                    üòÄ\n                  </button>\n                  <input\n                    type=\"text\"\n                    value={newMessage}\n                    onChange={(e) => {\n                      setNewMessage(e.target.value);\n                      handleTyping();\n                    }}\n                    placeholder=\"–ó—É—Ä–≤–∞—Å –±–∏—á–Ω—ç “Ø“Ø...\"\n                    className=\"flex-1 px-4 py-3 border border-blue-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white shadow-sm\"\n                    onKeyPress={(e) => e.key === \"Enter\" && handleSendMessage()}\n                  />\n                  <label className=\"cursor-pointer bg-white text-green-600 px-4 py-3 rounded-xl hover:bg-green-50 transition-all duration-200 hover:scale-105 shadow-sm border border-green-200 flex items-center\">\n                    <span className=\"mr-1\">üìé</span>\n                    <input\n                      type=\"file\"\n                      onChange={handleFileSelect}\n                      className=\"hidden\"\n                      accept=\"image/*,.pdf,.doc,.docx,.txt\"\n                    />\n                  </label>\n                  <button\n                    onClick={handleSendMessage}\n                    disabled={!newMessage.trim() && !selectedFile}\n                    className=\"bg-green-600 text-white px-6 py-3 rounded-xl hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 shadow-lg disabled:shadow-none\"\n                  >\n                    –ò–ª–≥—ç—ç—Ö\n                  </button>\n                </div>\n\n                {/* Emoji Picker */}\n                {showEmojiPicker && (\n                  <div className=\"absolute bottom-20 left-4 bg-white border border-green-300 rounded-xl p-4 shadow-xl animate-slide-in-up\">\n                    <div className=\"grid grid-cols-8 gap-3\">\n                      {[\"üòÄ\", \"üòÇ\", \"‚ù§Ô∏è\", \"üëç\", \"üëé\", \"üî•\", \"üíØ\", \"üôè\"].map(\n                        (emoji) => (\n                          <button\n                            key={emoji}\n                            onClick={() => {\n                              setNewMessage((prev) => prev + emoji);\n                              setShowEmojiPicker(false);\n                            }}\n                            className=\"text-2xl hover:bg-green-50 rounded-lg p-2 transition-all duration-200 hover:scale-110\"\n                          >\n                            {emoji}\n                          </button>\n                        ),\n                      )}\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Messages;\n"],"names":[],"mappings":"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"}}]
}